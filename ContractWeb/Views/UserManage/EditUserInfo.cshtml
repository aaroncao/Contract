<div class="ftitle">修改个人信息</div>

<div class="fitem">
    <label>用户名:</label>
    <label>@ViewBag.userID</label>
</div>
<div class="fitem">
    <label>真实姓名:</label>
    <input id="txtName" class="easyui-validatebox" value="@ViewBag.name" />
</div>
<div class="fitem">
    <label>性别:</label>
    <select id="drpSex" class="easyui-combobox" style="width:100px;" data-option="">
        <option value="1">男</option>
        <option value="2">女</option>
    </select>
</div>
<div class="fitem">
    <label>身份证号:</label>
    <input id="txtCard" class="easyui-validatebox" value="@ViewBag.card" />
</div>
<div class="fitem">
    <label>联系方式:</label>
    <input id="txtTel" class="easyui-validatebox" value="@ViewBag.tel" />
</div>
<div class="fitem">
    <label>联系地址:</label>
    <input id="txtAddress" class="easyui-validatebox" value="@ViewBag.address" />
</div>

<div id="dlg-buttons">
    <a href="javascript:void(0)" class="easyui-linkbutton" iconcls="icon-ok" onclick="save()">保存</a>
</div>

<p/>
<div id="message"></div>

<script>
    $(function () {
        var sex = 1;
        if ("@ViewBag.sex" == "女")
            sex = 2;
        $('#drpSex').combobox('setValue', sex);
    });

    function save() {
        var name = $("#txtName").val();
        var sex = $('#drpSex').combobox('getValue');
        var card = $("#txtCard").val();
        var tel = $("#txtTel").val();
        var address = $("#txtAddress").val();

        $.post("/UserManage/editInfo",
            "name=" + name + "&sex=" + sex + "&card=" + card + "&tel=" + tel + "&address=" + address,
            function (data) {
                if (data == 1)
                    $("#message").html("修改成功");
                else
                    $("#message").html("修改失败");
            }
        );
    }
</script>